{"ast":null,"code":"var _jsxFileName = \"/Users/csgergo/Documents/projects/repo_adu/adu/adu/src/Menu/Join.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function Join({\n  socket,\n  setRoomId,\n  roomId,\n  players,\n  setPlayers,\n  game,\n  setGame\n}) {\n  _s();\n\n  const [joinName, setJoinName] = useState(\"\");\n  const [joinCode, setJoinCode] = useState(\"\");\n  const history = useHistory();\n\n  async function handleJoin() {\n    console.log(players);\n    console.log(joinCode);\n    await socket.emit(\"join-room\", joinCode, response => {\n      if (response.status === \"ok\") {\n        console.log(\"sikeres\");\n        setRoomId(joinCode); //get state\n\n        socket.emit(\"get-state\", joinCode, response => {\n          console.log(response);\n          let obh = JSON.parse(response.state);\n          let obj = JSON.parse(obh);\n          console.log(obj);\n          obj.players.push({\n            \"id\": obj.players.length + 1,\n            \"name\": joinName,\n            \"socketid\": socket.id,\n            \"point\": 0,\n            \"tip\": 0,\n            \"boss\": false\n          });\n          obj.game.players += 1;\n          console.log(obj);\n          setTimeout(() => {\n            socket.emit(\"sync-state\", joinCode, `{\"game\": ${JSON.stringify(obj.game)}, \"players\": ${JSON.stringify(obj.players)} }`, false, response => {\n              console.log(\"state synced\");\n            });\n          }, 111);\n          history.push(\"/wait\");\n        });\n      } else {\n        alert(\"Helytelen kód!\");\n      }\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"join\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      id: \"jointitle\",\n      className: \"title is-1\",\n      children: \"Csatlakoz\\xE1s megl\\xE9v\\u0151 szob\\xE1hoz\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"joinroominput\",\n      onChange: event => setJoinCode(event.target.value),\n      className: \"input is-rounded is-warning\",\n      type: \"text\",\n      placeholder: \"Szoba azonos\\xEDt\\xF3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 183\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"joinnameinput\",\n      onChange: event => setJoinName(event.target.value),\n      className: \"input is-rounded is-warning\",\n      type: \"text\",\n      placeholder: \"J\\xE1t\\xE9kos n\\xE9v\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 179\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      id: \"joinbtn\",\n      onClick: () => handleJoin(),\n      className: \"button is-warning is-rounded startbtn\",\n      children: \"Csatlakoz\\xE1s\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Join, \"bEgcXnFB2whF9oyrq2EasWVyWnI=\", false, function () {\n  return [useHistory];\n});\n\n_c = Join;\n\nvar _c;\n\n$RefreshReg$(_c, \"Join\");","map":{"version":3,"sources":["/Users/csgergo/Documents/projects/repo_adu/adu/adu/src/Menu/Join.js"],"names":["useState","useHistory","Join","socket","setRoomId","roomId","players","setPlayers","game","setGame","joinName","setJoinName","joinCode","setJoinCode","history","handleJoin","console","log","emit","response","status","obh","JSON","parse","state","obj","push","length","id","setTimeout","stringify","alert","event","target","value"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { useHistory } from \"react-router\";\n\nexport function Join({socket, setRoomId, roomId, players, setPlayers, game, setGame}){\n    const [joinName, setJoinName] = useState(\"\");\n    const [joinCode, setJoinCode] = useState(\"\");\n    const history = useHistory();\n\n    async function handleJoin(){\n        console.log(players);\n        console.log(joinCode);\n        await socket.emit(\"join-room\", joinCode, (response) => {\n            if (response.status === \"ok\") {\n                console.log(\"sikeres\");\n                setRoomId(joinCode);\n                //get state\n\n                socket.emit(\"get-state\", joinCode, (response) => {\n                    console.log(response);\n                    let obh = JSON.parse(response.state);\n                    let obj = JSON.parse(obh);\n                    console.log(obj);\n                    obj.players.push({\"id\":obj.players.length+1 ,\"name\":joinName, \"socketid\": socket.id, \"point\": 0, \"tip\": 0, \"boss\": false});\n                    obj.game.players += 1;\n                    console.log(obj);\n                    setTimeout(() => {\n                        socket.emit(\"sync-state\", joinCode,\n                            `{\"game\": ${JSON.stringify(obj.game)}, \"players\": ${JSON.stringify(obj.players)} }`, false,\n                            (response) => {\n                                console.log(\"state synced\");\n                            }\n                        );\n                    },111)\n                    history.push(\"/wait\");\n                })\n            } else {\n              alert(\"Helytelen kód!\");\n            }\n        });\n    }\n\n    return(\n        <div className=\"join\">\n            <h1 id=\"jointitle\" className=\"title is-1\">Csatlakozás meglévő szobához</h1>\n            <input id=\"joinroominput\" onChange={(event) => setJoinCode(event.target.value)} className=\"input is-rounded is-warning\" type=\"text\" placeholder=\"Szoba azonosító\"></input><br></br>\n            <input id=\"joinnameinput\" onChange={(event) => setJoinName(event.target.value)} className=\"input is-rounded is-warning\" type=\"text\" placeholder=\"Játékos név\"></input><br></br>\n            <button id=\"joinbtn\" onClick={() => handleJoin()} className=\"button is-warning is-rounded startbtn\">Csatlakozás</button>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}